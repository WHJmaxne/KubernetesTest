#!groovy
pipeline{
    agent any
    environment{
        IMAGE_HUB="whjmanxe"
        IMAGE_NAME="kubernetestest"
        TAG_1=sh(returnStdout: true,script: 'date "+%Y%m%d%H%M"').trim()
        TAG_2=sh(returnStdout: true,script: 'git log -1 --pretty=format:"%h"').trim()
        IMAGE_TAG="${TAG_1}_${TAG_2}"
    }
    stages{
        stage('docker build'){
            steps{
                echo "start docker build ${IMAGE_HUB}/${IMAGE_NAME}:${IMAGE_TAG}"
            }
        }
    }
}