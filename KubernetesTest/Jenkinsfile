#!groovy
pipeline{
    agent any
    environment{
        IMAGE_HUB="whjmanxe"
        IMAGE_NAME="kubernetestest"
        TAG_1=sh(echo date "+%Y%m%d%H%M")
        TAG_2=sh(echo git log -1 --pretty=format:"%h")
        IMAGE_TAG="${TAG_1}_${TAG_2}"
    }
    stages{
        stage('docker build'){
            steps{
                echo "start docker build ${IMAGE_HUB}/${IMAGE_NAME}:${IMAGE_TAG}"
            }
        }
    }
}